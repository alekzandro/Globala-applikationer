<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: routes/applications.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: routes/applications.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const express = require('express');
const router = express.Router();
const db = require('../util/database')
const ApplicationDAO = require('../integration/applicationsDAO');
const {gen_navdata} = require('../util/helpers')
/**

    Route serving view of applications.
    @name get/view
    @function
    @memberof module:routes/application
    @param {Object} req - Express request object.
    @param {Object} res - Express response object.
    @param {function} next - Express next middleware function.
    @throws {Error} If there is an error while finding applications.
*/
router.get('/view', async (req, res, next) => {
  try {
    const nrOfApplications = req.query.nrOfApplications;
    navdata = gen_navdata(req)
    if(req.auth &amp;&amp; req.auth.role_id === 1){
      const application = new ApplicationDAO(db)
      const applications = await application.findApplications(nrOfApplications);
      console.log(applications)
      res.render('listofapplications', { applications: applications })
    } else {
      res.render('homepage.ejs', navdata)
    }
  } catch (error) {
    next(error);
  }
});
/**

    Route serving application creation page.
    @name get/create
    @function
    @memberof module:routes/application
    @param {Object} req - Express request object.
    @param {Object} res - Express response object.
    */
router.get('/create', (req, res) => {
  navdata = gen_navdata(req)
  if(req.auth){
    res.send("Create application")
  }
})


module.exports = router;

/**
 we have a try-catch block in the /view route handler to catch any errors that may occur during 
 the execution of the code inside the try block. If an error is caught, we call the next function 
 with the error as an argument to pass the error to the next error handling middleware or route handler.

 */</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-controller_Controller.html">controller/Controller</a></li><li><a href="module-routes_applicant.html">routes/applicant</a></li><li><a href="module-routes_create_application.html">routes/create_application</a></li></ul><h3>Classes</h3><ul><li><a href="Controller.html">Controller</a></li><li><a href="global.html#Person">Person</a></li><li><a href="Transactor.html">Transactor</a></li></ul><h3>Global</h3><ul><li><a href="global.html#authCheck">authCheck</a></li><li><a href="global.html#checkAuth">checkAuth</a></li><li><a href="global.html#commit">commit</a></li><li><a href="global.html#controller">controller</a></li><li><a href="global.html#rollback">rollback</a></li><li><a href="global.html#sendAuthCookie">sendAuthCookie</a></li><li><a href="global.html#startTransaction">startTransaction</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed Mar 08 2023 22:30:04 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
